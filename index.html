<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Malla Enfermería UNAB</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #fceaff;
      padding: 20px;
      color: #333;
    }

    h1 {
      text-align: center;
      color: #7c4d8a;
      margin-bottom: 40px;
    }

    .semestre {
      margin-bottom: 40px;
    }

    .semestre h2 {
      color: #b75d9f;
      margin-bottom: 15px;
    }

    .ramos {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
    }

    .ramo {
      background-color: #f9e0f7;
      border: 2px solid #f0bde2;
      padding: 12px 16px;
      border-radius: 10px;
      cursor: pointer;
      width: 240px;
      transition: 0.2s;
      position: relative;
    }

    .ramo:hover {
      box-shadow: 0 0 10px #e4acd8;
    }

    .ramo.bloqueado {
      background-color: #e4d5e8;
      border: 2px dashed #c3b3c9;
      cursor: not-allowed;
      opacity: 0.6;
    }

    .ramo.aprobado {
      background-color: #d4f8e8;
      border: 2px solid #85e1c2;
    }

    .tooltip {
      font-size: 12px;
      color: #555;
      margin-top: 5px;
    }
  </style>
</head>
<body>

  <h1>Malla Interactiva - Enfermería UNAB</h1>

  <div id="malla-container"></div>

  <script>
    const malla = [
      {
        semestre: "1er Año - Semestre 1",
        ramos: [
          "Morfología Integral",
          "Química General y Orgánica",
          "Biología Celular",
          "Razonamiento Matemático",
          "Bases Teóricas de la Enfermería"
        ]
      },
      {
        semestre: "1er Año - Semestre 2",
        ramos: [
          "Microbiología",
          "Bioquímica",
          "Socioantropologia",
          "Psicología Evolutiva",
          "Bases del Cuidado de Enfermería",
          "Habilidades Comunicativas"
        ]
      },
      {
        semestre: "2do Año - Semestre 1",
        ramos: [
          "Fisiología",
          "Salud Publica 1",
          "Enfermería en la Promoción y Prevención en Salud",
          "Cuidado de Enfermería en el Ciclo Vital",
          "Ingles 1"
        ]
      },
      {
        semestre: "2do Año - Semestre 2",
        ramos: [
          "Fisiopatología",
          "Farmacología General",
          "Salud Publica 2",
          "Bases de Enfermería en Salud Familiar y Comunitaria",
          "Cuidado de Enfermería en Adulto y Adulto Mayor",
          "Ingles 2"
        ]
      },
      {
        semestre: "3er Año - Semestre 1",
        ramos: [
          "Farmacología Clínica y Farmacovigilancia",
          "Cuidados de Enfermería en Salud Familiar",
          "Cuidados de Enfermería en el Niño y Adulto",
          "Fundamentos de Gestión y Liderazgo en Enfermeria",
          "Integrador 1: Cuidados de Enfermería 1",
          "Ingles 3"
        ]
      },
      {
        semestre: "3er Año - Semestre 2",
        ramos: [
          "Cuidado de Enfermería en Salud Mental y Comunidad",
          "Cuidado de Enfermería en el Adulto y Adulto Mayor con Alteraciones de Salud",
          "Métodos de Análisis en Enfermeria",
          "Administración en Unidades de Enfermeria",
          "Ingles 4",
          "Razonamiento Científico y TICS"
        ]
      },
      {
        semestre: "4to Año - Semestre 1",
        ramos: [
          "Ética y Legislación en Enfermeria",
          "Cuidados de Enfermería en Salud Familiar y Comunitaria",
          "Cuidados de Enfermería en el Niño y Adolescente con Alteraciones en Salud",
          "Desarrollo de Proyectos en Enfermeria",
          "Pensamiento Critico"
        ]
      },
      {
        semestre: "4to Año - Semestre 2",
        ramos: [
          "Cuidado Integral del Niño y Adulto",
          "Seminario de Investigación en Enfermeria",
          "Integrador 2: Cuidado de Enfermería 2",
          "Responsabilidad Social"
        ]
      },
      {
        semestre: "5to Año - Semestre 1",
        ramos: [
          "Integrador 3: Gestión del Cuidado en Unidades de Enfermeria"
        ]
      },
      {
        semestre: "5to Año - Semestre 2",
        ramos: [
          "Integrador 4: Gestión del Cuidado en Salud Familiar y Comunitaria"
        ]
      }
    ];

    const prerrequisitos = {
      "Microbiología": ["Biología Celular"],
      "Bioquímica": ["Química General y Orgánica"],
      "Bases del Cuidado de Enfermería": ["Bases Teóricas de la Enfermería"],
      "Fisiología": ["Morfología Integral"],
      "Salud Publica 1": ["Razonamiento Matemático"],
      "Enfermería en la Promoción y Prevención en Salud": ["Bases Teóricas de la Enfermería", "Socioantropologia"],
      "Cuidado de Enfermería en el Ciclo Vital": ["Psicología Evolutiva"],
      "Fisiopatología": ["Fisiología"],
      "Farmacología General": ["Microbiología", "Bioquímica"],
      "Salud Publica 2": ["Salud Publica 1", "Enfermería en la Promoción y Prevención en Salud"],
      "Bases de Enfermería en Salud Familiar y Comunitaria": ["Enfermería en la Promoción y Prevención en Salud"],
      "Cuidado de Enfermería en Adulto y Adulto Mayor": ["Cuidado de Enfermería en el Ciclo Vital"],
      "Ingles 2": ["Ingles 1"],
      "Farmacología Clínica y Farmacovigilancia": ["Farmacología General", "Fisiopatología"],
      "Cuidados de Enfermería en Salud Familiar": ["Salud Publica 2", "Bases de Enfermería en Salud Familiar y Comunitaria"],
      "Cuidados de Enfermería en el Niño y Adulto": ["Fisiopatología", "Cuidado de Enfermería en Adulto y Adulto Mayor"],
      "Fundamentos de Gestión y Liderazgo en Enfermeria": ["Salud Publica 2"],
      "Integrador 1: Cuidados de Enfermería 1": [
        "Habilidades Comunicativas",
        "Cuidado de Enfermería en Adulto y Adulto Mayor",
        "Bases de Enfermería en Salud Familiar y Comunitaria",
        "Salud Publica 2",
        "Farmacología General",
        "Fisiopatología"
      ],
      "Ingles 3": ["Ingles 2"],
      "Cuidado de Enfermería en Salud Mental y Comunidad": ["Cuidados de Enfermería en Salud Familiar", "Integrador 1: Cuidados de Enfermería 1"],
      "Cuidado de Enfermería en el Adulto y Adulto Mayor con Alteraciones de Salud": ["Integrador 1: Cuidados de Enfermería 1"],
      "Métodos de Análisis en Enfermeria": ["Fundamentos de Gestión y Liderazgo en Enfermeria", "Cuidado de Enfermería en Adulto y Adulto Mayor"],
      "Administración en Unidades de Enfermeria": ["Fundamentos de Gestión y Liderazgo en Enfermeria"],
      "Ingles 4": ["Ingles 3"],
      "Razonamiento Científico y TICS": ["Habilidades Comunicativas"],
      "Ética y Legislación en Enfermeria": ["Integrador 1: Cuidados de Enfermería 1"],
      "Cuidados de Enfermería en Salud Familiar y Comunitaria": ["Cuidado de Enfermería en Salud Mental y Comunidad"],
      "Cuidados de Enfermería en el Niño y Adolescente con Alteraciones en Salud": ["Cuidados de Enfermería en el Niño y Adulto", "Integrador 1: Cuidados de Enfermería 1"],
      "Desarrollo de Proyectos en Enfermeria": ["Administración en Unidades de Enfermeria"],
      "Pensamiento Critico": ["Razonamiento Científico y TICS"],
      "Cuidado Integral del Niño y Adulto": [
        "Ética y Legislación en Enfermeria",
        "Cuidado de Enfermería en el Adulto y Adulto Mayor con Alteraciones de Salud",
        "Cuidados de Enfermería en el Niño y Adolescente con Alteraciones en Salud"
      ],
      "Seminario de Investigación en Enfermeria": ["Ingles 4", "Métodos de Análisis en Enfermeria", "Ética y Legislación en Enfermeria"],
      "Integrador 2: Cuidado de Enfermería 2": [
        "Ética y Legislación en Enfermeria",
        "Cuidados de Enfermería en Salud Familiar y Comunitaria",
        "Cuidado de Enfermería en el Adulto y Adulto Mayor con Alteraciones de Salud",
        "Cuidados de Enfermería en el Niño y Adolescente con Alteraciones en Salud",
        "Desarrollo de Proyectos en Enfermeria"
      ],
      "Responsabilidad Social": ["Pensamiento Critico"],
      "Integrador 3: Gestión del Cuidado en Unidades de Enfermeria": [
        "Cuidado Integral del Niño y Adulto",
        "Seminario de Investigación en Enfermeria",
        "Integrador 2: Cuidado de Enfermería 2",
        "Responsabilidad Social"
      ],
      "Integrador 4: Gestión del Cuidado en Salud Familiar y Comunitaria": [
        "Cuidado Integral del Niño y Adulto",
        "Seminario de Investigación en Enfermeria",
        "Integrador 2: Cuidado de Enfermería 2",
        "Responsabilidad Social"
      ]
    };

    const aprobados = JSON.parse(localStorage.getItem("ramos_aprobados") || "[]");

    function renderMalla() {
      const container = document.getElementById("malla-container");
      container.innerHTML = "";

      malla.forEach(({ semestre, ramos }) => {
        const div = document.createElement("div");
        div.className = "semestre";

        const titulo = document.createElement("h2");
        titulo.textContent = semestre;

        const lista = document.createElement("div");
        lista.className = "ramos";

        ramos.forEach(ramo => {
          const tarjeta = document.createElement("div");
          tarjeta.className = "ramo";
          tarjeta.textContent = ramo;

          const requisitos = prerrequisitos[ramo] || [];
          const bloqueado = requisitos.some(r => !aprobados.includes(r));
          if (bloqueado) tarjeta.classList.add("bloqueado");
          if (aprobados.includes(ramo)) tarjeta.classList.add("aprobado");

          if (requisitos.length) {
            const tooltip = document.createElement("div");
            tooltip.className = "tooltip";
            tooltip.textContent = "Prerrequisitos: " + requisitos.join(", ");
            tarjeta.appendChild(tooltip);
          }

          tarjeta.onclick = () => {
            if (bloqueado) return;
            const index = aprobados.indexOf(ramo);
            if (index >= 0) {
              aprobados.splice(index, 1);
            } else {
              aprobados.push(ramo);
            }
            localStorage.setItem("ramos_aprobados", JSON.stringify(aprobados));
            renderMalla();
          };

          lista.appendChild(tarjeta);
        });

        div.appendChild(titulo);
        div.appendChild(lista);
        container.appendChild(div);
      });
    }

    renderMalla();
  </script>
</body>
</html>
